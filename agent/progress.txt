# Progress Log

Starting work on multi-tenancy and authentication system.

## Feature 1: Multi-tenancy Database Schema - 2026-02-02

- What was done:
  - Created SQL migration file at backend/internal/db/migrations/006_multi_tenancy.sql
  - Added organizations table (id, name, slug, timestamps) with unique slug constraint
  - Added users table (id, email, password_hash, name, timestamps) with unique email
  - Added organization_memberships table with role constraint (admin, editor, viewer)
  - Added user_auth_methods table for SSO providers
  - Added sso_configs table for per-org Google/Microsoft SSO configuration
  - Added prometheus_datasources table for per-org data sources
  - Modified dashboards table to include organization_id and created_by columns
  - Modified panels table to include created_by column
  - Added indexes on organization_id, user_id, email, slug for performance
  - Added foreign key constraints with CASCADE deletes
  - Created default 'Personal' organization for existing data
  - Updated migrations.go with all new migrations
  - Created Go models for Organization, User, OrganizationMembership, UserAuthMethod, SSOConfig, PrometheusDatasource
  - Updated Dashboard and Panel models with new fields
  - Added migration tests (migrations_test.go)

- Files changed:
  - backend/internal/db/migrations/006_multi_tenancy.sql (new)
  - backend/internal/db/migrations.go (updated)
  - backend/internal/db/migrations_test.go (new)
  - backend/internal/models/organization.go (new)
  - backend/internal/models/user.go (new)
  - backend/internal/models/sso_config.go (new)
  - backend/internal/models/prometheus_datasource.go (new)
  - backend/internal/models/dashboard.go (updated)
  - backend/internal/models/panel.go (updated)

- PR: https://github.com/janhoon/dash/pull/13
