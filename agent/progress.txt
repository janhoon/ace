# Progress Log

Starting work on authentication, SSO, and visualization features.

## Feature 1: Multi-tenancy Database Schema - COMPLETE
- PR #13 merged
- All tables and models created

## Feature 2: Auth - Core Authentication System - 2026-02-02
- What was done:
  - Added JWT (RS256, 4096-bit) authentication with golang-jwt/jwt/v5
  - Implemented Argon2id password hashing (time=3, memory=64MB, parallelism=4)
  - Created auth middleware for protected routes
  - Added endpoints: POST /api/auth/register, POST /api/auth/login, GET /api/auth/me
  - JWT includes: sub (user_id), email, name, exp, iat (15 min expiry)
  - Password validation: min 8 chars, uppercase, lowercase, digit
- Files changed:
  - backend/internal/auth/jwt.go - RSA key generation, token signing/verification
  - backend/internal/auth/password.go - Argon2id hash and verify
  - backend/internal/auth/middleware.go - JWT middleware for protected routes
  - backend/internal/handlers/auth.go - register, login, me endpoints
  - backend/cmd/api/main.go - added auth routes
  - backend/internal/auth/jwt_test.go - JWT tests
  - backend/internal/auth/password_test.go - password tests
  - backend/internal/handlers/auth_test.go - handler tests
- PR: #14

## Feature 6: Auth - Multi-Auth Linking - 2026-02-02
- What was done:
  - SSO flows already support automatic email-based linking (implemented in Google/Microsoft SSO)
  - Added GET /api/auth/me/methods - Lists user's auth methods (password + SSO providers)
  - Added DELETE /api/auth/me/methods/{id} - Unlinks an auth method
  - Password treated as virtual auth method with id=uuid.Nil
  - Protection against unlinking last auth method (returns 400 error)
  - Password can be removed by passing uuid.Nil, leaving only SSO methods
  - SSO methods stored in user_auth_methods table
- Files changed:
  - backend/internal/handlers/auth.go (added GetAuthMethods, UnlinkAuthMethod)
  - backend/internal/handlers/auth_test.go (added tests)
  - backend/cmd/api/main.go (added routes)
- PR: https://github.com/janhoon/dash/pull/18
